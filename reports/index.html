<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:6,&quot;tests&quot;:8,&quot;passes&quot;:8,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-09-16T17:01:43.825Z&quot;,&quot;end&quot;:&quot;2024-09-16T17:01:49.664Z&quot;,&quot;duration&quot;:5839,&quot;testsRegistered&quot;:8,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;90e6e418-5b35-4d01-aea4-e9e999198e68&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1907,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nmongoose\n    .connect(MONGODB_CNX_STR)\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9a001d0-d045-4fee-b004-3330c0007e25&quot;,&quot;parentUUID&quot;:&quot;90e6e418-5b35-4d01-aea4-e9e999198e68&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1162,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(20000);\nPromise.all([\n    mongoose.connection.db.collection(&#x27;productos&#x27;).deleteMany({}),\n    mongoose.connection.db.collection(&#x27;carritos&#x27;).deleteMany({}),\n    mongoose.connection.db.collection(&#x27;sessions&#x27;).deleteMany({}),\n    mongoose.connection.db.collection(&#x27;usuarios&#x27;).deleteMany({}),\n])\n    .then(() =&gt; mongoose.disconnect())\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b7804bb-922c-496d-8c86-50dfcf429d7b&quot;,&quot;parentUUID&quot;:&quot;90e6e418-5b35-4d01-aea4-e9e999198e68&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5cdbd94d-69e8-4f05-a450-89fed443df2f&quot;,&quot;title&quot;:&quot;Testing sesiones:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eb084593-099e-4e58-850b-7c4de434334d&quot;,&quot;title&quot;:&quot;registrarse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;registra usuario&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: registrarse registra usuario&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1011,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    nombre: &#x27;x&#x27;,\n    apellido: &#x27;x&#x27;,\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n    rol: &#x27;premium&#x27;,\n};\nconst res = await requester\n    .post(&#x27;/api/sessions/register&#x27;)\n    .send(datos);\nusuarioId = res.body.user._id;\nexpect(res.status).to.equal(201);\nexpect(res.body).to.have.property(&#x27;status&#x27;).that.equals(&#x27;success&#x27;);\nexpect(res.body)\n    .to.have.property(&#x27;message&#x27;)\n    .that.equals(&#x27;Registro exitoso&#x27;);\nexpect(res.body.user)\n    .to.have.property(&#x27;email&#x27;)\n    .that.equals(&#x27;x@x.com&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;812c7af9-18d5-4b77-bb2e-1a5d1a6100d5&quot;,&quot;parentUUID&quot;:&quot;eb084593-099e-4e58-850b-7c4de434334d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;812c7af9-18d5-4b77-bb2e-1a5d1a6100d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1011,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b9ffff2-3771-41fa-b036-9d239fe4b49f&quot;,&quot;title&quot;:&quot;Iniciar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería fallar con credenciales incorrectas&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería fallar con credenciales incorrectas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = {\n    username: &#x27;usuario&#x27;,\n    password: &#x27;password&#x27;,\n};\nconst { statusCode, body } = await requester\n    .post(&#x27;/api/sessions&#x27;)\n    .send(credentials);\nexpect(statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b9872af-b26b-4fd6-bce4-951c4c5ddd43&quot;,&quot;parentUUID&quot;:&quot;5b9ffff2-3771-41fa-b036-9d239fe4b49f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería iniciar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería iniciar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:374,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n};\nconst res = await requester.post(&#x27;/api/sessions/login&#x27;).send(datos);\ncarritoId = res.body.user.cart;\nexpect(res.status).to.equal(201); // Ajusta el código de estado a 200 si es necesario\nexpect(res.body)\n    .to.have.property(&#x27;message&#x27;)\n    .that.equals(&#x27;login success&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70e8acf5-30c5-4d25-af6a-919cb727f491&quot;,&quot;parentUUID&quot;:&quot;5b9ffff2-3771-41fa-b036-9d239fe4b49f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b9872af-b26b-4fd6-bce4-951c4c5ddd43&quot;,&quot;70e8acf5-30c5-4d25-af6a-919cb727f491&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:379,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;158441ec-9c19-43ba-bbd1-c90d6390ee4c&quot;,&quot;title&quot;:&quot;Testing productos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Agregar un producto:&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Testing productos: Agregar un producto:&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const producto = {\n    title: &#x27;Casa&#x27;,\n    description: &#x27;Descripción de la casa&#x27;,\n    price: 4241,\n    thumbnail: &#x27;url-de-imagen&#x27;,\n    code: `unique-code-${Date.now()}`,\n    stock: 10,\n    category: &#x27;Inmuebles&#x27;,\n    status: true,\n    owner: &#x27;user@example.com&#x27;,\n};\nconst req = await requester\n    .post(&#x27;/api/products&#x27;)\n    .set(&#x27;x-test-mode&#x27;, &#x27;true&#x27;)\n    .send(producto);\nproductoId = req.body._id; // Mostrar el cuerpo de la respuesta\nexpect(req.statusCode).to.equal(200);\nexpect(req.body).to.have.property(&#x27;_id&#x27;);\nexpect(req.body).to.have.property(&#x27;title&#x27;, &#x27;Casa&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1310ee12-a1eb-4c9c-8fa5-df5f57002238&quot;,&quot;parentUUID&quot;:&quot;158441ec-9c19-43ba-bbd1-c90d6390ee4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería obtener una lista de productos&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Testing productos: debería obtener una lista de productos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:180,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, body } = await requester\n    .get(&#x27;/api/products&#x27;)\n    .set(&#x27;x-test-mode&#x27;, &#x27;true&#x27;);\n// Mostrar el cuerpo de la respuesta\nexpect(statusCode).to.equal(200);\nexpect(body).to.be.an(&#x27;array&#x27;);\nbody.forEach((producto) =&gt; {\n    expect(producto).to.have.property(&#x27;_id&#x27;);\n    expect(producto).to.have.property(&#x27;title&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaf5cce6-1af6-4249-b1b4-bcefd285f967&quot;,&quot;parentUUID&quot;:&quot;158441ec-9c19-43ba-bbd1-c90d6390ee4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1310ee12-a1eb-4c9c-8fa5-df5f57002238&quot;,&quot;aaf5cce6-1af6-4249-b1b4-bcefd285f967&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:367,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df25a016-f018-495e-874e-ce8072e7e36c&quot;,&quot;title&quot;:&quot;testing de carrito&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;agrega un producto al carrito&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: testing de carrito agrega un producto al carrito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:544,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = await requester\n    .post(`/api/carts/${carritoId}/producto/${productoId}`)\n    .set(&#x27;x-test-mode&#x27;, &#x27;true&#x27;);\nexpect(req.statusCode).to.equal(200);\nexpect(req.body).to.have.property(&#x27;carrito&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dee28f4-f09f-4cd0-b16f-d1c80631b6d7&quot;,&quot;parentUUID&quot;:&quot;df25a016-f018-495e-874e-ce8072e7e36c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;elimina un producto del carrito&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: testing de carrito elimina un producto del carrito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:445,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = await requester\n    .delete(`/api/carts/${carritoId}/${productoId}`)\n    .set(&#x27;x-test-mode&#x27;, &#x27;true&#x27;);\nexpect(req.statusCode).to.equal(200);\nexpect(req.body).to.have.property(&#x27;status&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ccfe52d-b639-4be7-b649-31da43c56e81&quot;,&quot;parentUUID&quot;:&quot;df25a016-f018-495e-874e-ce8072e7e36c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0dee28f4-f09f-4cd0-b16f-d1c80631b6d7&quot;,&quot;8ccfe52d-b639-4be7-b649-31da43c56e81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:989,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90636fb2-8dc7-4bfb-b03a-2691a6d59138&quot;,&quot;title&quot;:&quot;Cerrar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería cerrar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Cerrar sesión: debería cerrar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, body } = await requester.delete(\n    &#x27;/api/sessions/current&#x27;\n);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;status&#x27;, &#x27;success&#x27;);\nexpect(body).to.have.property(&#x27;message&#x27;, &#x27;logout OK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6190d35-1fff-4dde-968c-f4e627cebd21&quot;,&quot;parentUUID&quot;:&quot;90636fb2-8dc7-4bfb-b03a-2691a6d59138&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6190d35-1fff-4dde-968c-f4e627cebd21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.7.3&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;index&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportFilename&quot;:&quot;index&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportTitle&quot;:&quot;proyectoFinal2.0&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;reports\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\reports\\index.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyectoFinal2.0\\reports\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>